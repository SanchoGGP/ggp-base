<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Sancho match record</title>

    <script type='text/javascript' src='//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
    <script src="//code.highcharts.com/highcharts.js"></script>

    <script type='text/javascript'>//<![CDATA[
      $(function ()
      {
          $('#MEM').highcharts(
          {
            chart: {marginRight: 80},
            title: {text: 'Memory'},
            xAxis: {type: 'datetime'},
            yAxis: [
                     {
                       title: {text: 'GB'},
                       min: 0
                     }
                   ]
          });

          $('#GC').highcharts(
          {
            chart: {marginRight: 80},
            title: {text: 'Garbage Collection'},
            xAxis: {type: 'datetime'},
            yAxis: [
                     {
                       title:    {text: 'ms'},
                       min:      0
                     },
                     {
                       title:    {text: 'count'},
                       opposite: true,
                       min:      0
                     }
                   ]
          });

          $('#PERF').highcharts(
          {
            chart: {marginRight: 80},
            title: {text: 'Performance'},
            xAxis: {type: 'datetime'},
            yAxis: [
                     {
                       title: {text: 'Expansions/ms'},
                       min:   0
                     },
                     {
                       title: {text: 'Rollouts/expansion'},
                       opposite: true,
                       min: 0
                     }
                   ]
          });
      });

      function receiveMessage(xiEvent)
      {
        lLogData = JSON.parse(xiEvent.data);
        $.each(lLogData.statistics, function()
        {
          $('#' + this.showon).highcharts().addSeries(this);
        });
      }

      window.addEventListener("message", receiveMessage, false);
      parent.postMessage("", "*");

      //]]>
    </script>
  </head>

  <body>
    <div id="MEM"   style="height: 300px"></div>
    <div id="GC"    style="height: 300px"></div>
    <div id="PERF"  style="height: 300px"></div>
  </body>

</html>

